/*! For license information please see map.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_skybrush_live=self.webpackChunk_skybrush_live||[]).push([[163],{7639:(e,t,n)=>{var r=n(24994);t.A=void 0;var o=n(91384),i=r(n(74614)),a=(0,o.withThemeCreator)({defaultTheme:i.default});t.A=a},98029:(e,t,n)=>{var r=n(24994),o=n(6305);t.A=void 0;var i=o(n(96540)),a=(0,r(n(76447)).default)(i.createElement("path",{d:"M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z"}),"AllOut");t.A=a},24709:(e,t,n)=>{var r=n(24994),o=n(6305);t.A=void 0;var i=o(n(96540)),a=(0,r(n(76447)).default)(i.createElement("path",{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z"}),"CropSquare");t.A=a},76271:(e,t,n)=>{var r=n(24994),o=n(6305);t.A=void 0;var i=o(n(96540)),a=(0,r(n(76447)).default)(i.createElement("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");t.A=a},41012:(e,t,n)=>{var r=n(24994),o=n(6305);t.A=void 0;var i=o(n(96540)),a=(0,r(n(76447)).default)(i.createElement("path",{d:"M18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 4.5 6 11 6 11s6-6.5 6-11zm-8 0c0-1.1.9-2 2-2s2 .9 2 2-.89 2-2 2c-1.1 0-2-.9-2-2zM5 20v2h14v-2H5z"}),"PinDrop");t.A=a},6768:(e,t,n)=>{var r=n(24994),o=n(6305);t.A=void 0;var i=o(n(96540)),a=(0,r(n(76447)).default)(i.createElement(i.Fragment,null,i.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),i.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})),"ZoomIn");t.A=a},35533:(e,t,n)=>{n.r(t),n.d(t,{default:()=>No});n(52675),n(89463),n(2259),n(45700),n(2008),n(50113),n(23418),n(74423),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(69085),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(60825),n(27495),n(90906),n(38781),n(21699),n(47764),n(23500),n(62953);var r=n(59984),o=n(2634),i=n(51790),a=n(33106),l=n(92049);const c=function(e,t){return((0,l.default)(e)?o.A:i.A)(e,(0,a.A)(t,3))};var u=n(83869),s=n(50071),f=n(20281),d=n(5556),p=n.n(d),y=n(96540),v=n(69733),m=n(81709),b=n(46928),h=n(58704),g=n(34142),w=n(96702),_=n(6292),O=n(60764),E=n(2757),A=n(97258),S=n(32),C=n(28550),P=(n(18107),n(54554),n(67357),n(42531)),j=n(46996),F=n(89610),k=n(24639);const T=function(){return!0};function x(e){return e?(0,F.default)(e)?e:(0,l.default)(e)?function(t){return(0,P.A)(e,t)}:k.A:T}var M=function(e){var t=e.target.getCoordinates();(0,j.default)(t.at(0),t.at(-1))||(t.splice(-1,1,t[0]),e.target.setCoordinates(t))};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}function V(e,t,n){return t=U(t),function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,z()?Reflect.construct(t,n||[],U(e).constructor):t.apply(e,n))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}var B=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=V(this,t,[{handleEvent:function(t){var n=h.doubleClick(t);if(!h.click(t)&&!n)return!0;if(!h.primaryAction(t))return!0;if(!e._condition(t))return!0;if(!e._select)return!0;e._layerSelectorFunction||(e._layerSelectorFunction=x(e._layers));var r,o,i=t.coordinate,a=t.map;if(a.forEachFeatureAtPixel(t.pixel,(function(t){if(e._isFeatureFeasible(t))return r=t,o=0,!0}),{layerFilter:e._layerSelectorFunction}),!r){var l,c=(0,u.A)(e._distanceOfEventFromFeature,t),s=R(a.getLayers().getArray().filter(e._isLayerFeasible).filter(e._layerSelectorFunction).map((function(t){var n=t.getSource();return n?n.getClosestFeatureToCoordinate(i,e._isFeatureFeasible):void 0})).filter(e._isFeatureFeasible).reverse());try{for(s.s();!(l=s.n()).done;){var f=l.value;if((o=c(f))<=e._threshold){r=f;break}}}catch(e){s.e(e)}finally{s.f()}}var d=e._activateCondition(t)?"activate":e._addCondition(t)?"add":e._removeCondition(t)?"remove":e._toggleCondition(t)?"toggle":"set";return void 0!==r?(e._select(d,r,o),!1):("set"===d&&e._select("clear"),!0)}}]);var r={condition:h.primaryAction,activateCondition:h.never,addCondition:h.never,removeCondition:h.never,toggleCondition:h.never,threshold:Number.POSITIVE_INFINITY};return n=Object.assign(r,n),e._condition=n.condition,e._activateCondition=n.activateCondition,e._addCondition=n.addCondition,e._removeCondition=n.removeCondition,e._toggleCondition=n.toggleCondition,e._select=n.onSelect,e._threshold=n.threshold,e.setLayers(n.layers),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(t,e),n=t,(r=[{key:"_distanceOfEventFromFeature",value:function(e,t){var n=t.getGeometry()instanceof g.default?new w.A(t.getGeometry().getCoordinates()):t.getGeometry(),r=(0,S.OU)(n,e.coordinate),o=e.map.getPixelFromCoordinate(r);return(0,C.CX)(e.pixel,o)}},{key:"getLayers",value:function(){return this._layers}},{key:"_isFeatureFeasible",value:function(e){return Boolean(e)&&!e.get("skipSelection")}},{key:"_isLayerFeasible",value:function(e){return e&&e.getVisible()&&e instanceof E.default}},{key:"setLayers",value:function(e){this._layers=e,this._layerSelectorFunction=void 0}}])&&I(n.prototype,r),o&&I(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(_.Ay);const W=(0,A.createOLInteractionComponent)("SelectNearestFeature",(function(e){return new B(e)}),{propTypes:{activateCondition:p().func,addCondition:p().func,layers:p().oneOfType([p().func,p().arrayOf(O.default)]),removeCondition:p().func,onSelect:p().func,threshold:p().number,toggleCondition:p().func},fragileProps:["activateCondition","addCondition","layers","removeCondition","threshold","toggleCondition"]});var Z=n(88389),Y=n(26916);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}var q=["children"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function J(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function ee(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}function ne(e,t,n){return t=oe(t),function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,re()?Reflect.construct(t,n||[],oe(e).constructor):t.apply(e,n))}function re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(re=function(){return!!e})()}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}var le=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};X(this,t),e=ne(this,t,[{handleEvent:function(t){if(!e._condition(t))return!0;if(t.originalEvent.preventDefault(),e._selectAction){e._layerSelectorFunction||(e._layerSelectorFunction=e._createLayerSelectorFunction(e._layers));var n=t.coordinate,r=t.map,o=(0,u.A)(e._distanceOfEventFromFeature,t),i=r.getLayers().getArray().filter(e._isLayerFeasible).filter(e._layerSelectorFunction).map((function(e){var t=e.getSource();return t?t.getClosestFeatureToCoordinate(n):void 0})).filter(e._isFeatureFeasible),a=i&&i.length>0?(0,Z.A)(i,o):void 0;if(a){var l=o(a);l<=e._threshold&&e._selectAction&&e._selectAction("add",a,l)}}if(e._onContextMenu){var c=e._getLonLatFromEvent(t);e._onContextMenu(t,c)}return b.N1(t)}}]);var r={condition:b.He,threshold:Number.POSITIVE_INFINITY};return n=Object.assign(r,n),e._condition=n.condition,e._projection=n.projection,e._selectAction=n.selectAction,e._onContextMenu=n.onContextMenu,e._threshold=n.threshold,e.setLayers(n.layers),e}return ie(t,e),ee(t,[{key:"_createLayerSelectorFunction",value:function(e){return e?(0,F.default)(e)?e:(0,l.default)(e)?function(t){return(0,P.A)(e,t)}:k.A:T}},{key:"_distanceOfEventFromFeature",value:function(e,t){var n=t.getGeometry();if(n.intersectsCoordinate(e.coordinate))return 0;var r=n.getClosestPoint(e.coordinate),o=e.map.getPixelFromCoordinate(r);return(0,C.CX)(e.pixel,o)}},{key:"getLayers",value:function(){return this._layers}},{key:"_getLonLatFromEvent",value:function(e){return this._projection?(0,f.pd)(e.coordinate,"EPSG:3857",this._projection):e.coordinate}},{key:"_isFeatureFeasible",value:function(e){return Boolean(e)}},{key:"_isLayerFeasible",value:function(e){return e&&e.getVisible()&&e instanceof E.default}},{key:"setLayers",value:function(e){this._layers=e,this._layerSelectorFunction=void 0}}])}(_.Ay),ce=(0,A.createOLInteractionComponent)("ShowContextMenuInner",(function(e){return new le(e)}),{propTypes:{condition:p().func,layers:m.UT.LayerFilter,onContextMenu:p().func,selectAction:p().func,threshold:p().number},fragileProps:["condition","layers","onContextMenu","selectAction","threshold"]}),ue=function(e){function t(e){var n;return X(this,t),J(n=ne(this,t,[e]),"_openContextMenuFromChild",(function(e,t){var r=n._contextMenuRef.current,o=r.open||(r.getWrappedInstance?r.getWrappedInstance().open:void 0);if(o){var i={left:e.originalEvent.pageX,top:e.originalEvent.pageY};n.props.onOpening&&n.props.onOpening(e,t),o(i,{coords:t})}})),n._contextMenuRef=y.createRef(),n}return ie(t,e),ee(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=$(e,q);return t?y.createElement(ce,K({onContextMenu:this._openContextMenuFromChild},n),y.cloneElement(y.Children.only(this.props.children),{ref:this._contextMenuRef})):null}}])}(y.Component);J(ue,"propTypes",{active:p().bool,children:p().element,layers:m.UT.LayerFilter,map:p().instanceOf(Y.default),onOpening:p().func,projection:p().string,select:p().func,contextMenu:p().func,threshold:p().number});const se=(0,m.RM)(ue);n(40888),n(15472);var fe=n(97859);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function ye(e,t,n){return t=be(t),function(e,t){if(t&&("object"===de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ve()?Reflect.construct(t,n||[],be(e).constructor):t.apply(e,n))}function ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}function me(){return me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},me.apply(this,arguments)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ge(e,t,n){return(t=we(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){var t=function(e,t){if("object"!=de(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==de(t)?t:t+""}var _e=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=ye(this,t,[{handleEvent:function(t){if(!h.pointerMove(t))return!0;e._layerSelectorFunction||(e._layerSelectorFunction=x(e._layers));var n=t.map,r=t.pixel,o=n.forEachFeatureAtPixel(r,(function(e){return e}),{layerFilter:e._layerSelectorFunction,hitTolerance:e._hitTolerance});return o!==e._lastFeature&&e._setTrackedFeature(o),!0}}]),ge(e,"_lastFeature",null),ge(e,"_hideTimeout",null),ge(e,"_onPointerOut",(function(){e._setTrackedFeature(null)})),ge(e,"_setTrackedFeature",(function(t){t!==e._lastFeature&&(e._lastFeature=t,e._nearestFeatureChanged&&((0,fe.default)(t)?e._hideTimeout=setTimeout((function(){return e._nearestFeatureChanged(null)}),100):(e._hideTimeout&&(clearTimeout(e._hideTimeout),e._hideTimeout=null),e._nearestFeatureChanged(t))))}));return n=Object.assign({hitTolerance:0},n),e._nearestFeatureChanged=n.onNearestFeatureChanged,e._hitTolerance=n.hitTolerance,e.setLayers(n.layers),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(t,e),n=t,r=[{key:"getLayers",value:function(){return this._layers}},{key:"setLayers",value:function(e){this._layers=e,this._layerSelectorFunction=void 0}},{key:"setMap",value:function(e){var n=this.getMap();if(n){var r=n.getViewport();r&&r.removeEventListener("pointerout",this._onPointerOut)}if(me(be(t.prototype),"setMap",this).call(this,e),n=this.getMap()){var o=n.getViewport();o&&o.addEventListener("pointerout",this._onPointerOut)}}}],r&&pe(n.prototype,r),o&&pe(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(_.Ay);const Oe=(0,A.createOLInteractionComponent)("SelectNearestFeature",(function(e){return new _e(e)}),{propTypes:{hitTolerance:p().number,layers:p().oneOfType([p().func,p().arrayOf(O.default)]),onNearestFeatureChanged:p().func},fragileProps:["layers","hitTolerance"]});var Ee=n(1685),Ae=n(70915),Se=n(21409),Ce=n(37813),Pe=n(61506),je=n(23287);function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ge(r.key),r)}}function Re(e,t,n){return t&&De(e.prototype,t),n&&De(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Le(e,t,n){return t=Ne(t),function(e,t){if(t&&("object"===Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ie()?Reflect.construct(t,n||[],Ne(e).constructor):t.apply(e,n))}function Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ie=function(){return!!e})()}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function Ue(e,t,n){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fe(t)?t:t+""}var Be={move:function(e,t,n){e.translate(t,n)},rotate:function(e,t,n,r){var o=[this.pivot[0]-this.center[0],this.pivot[1]-this.center[1]],i=[o[0]+r[0],o[1]+r[1]],a=Math.atan2(o[1],o[0]),l=Math.atan2(i[1],i[0])-a,c=l-(this.lastAngle||0);e.rotate(c,this.center),this.lastAngle=l}},We=function(e){function t(e){var n;Me(this,t),n=Le(this,t,[{handleDownEvent:function(e){var t=n.decideTypeFromEvent_(e);if(!t)return!1;var r=n.featureProvider_?n.featureProvider_(e.map):[];if(n.lastFeature_=n.featureAtPixel_(e.pixel,e.map,r),!n.lastCoordinate_&&n.lastFeature_){if(n.firstCoordinate_=e.coordinate,n.lastCoordinate_=e.coordinate,n.features_=r,n.transformation_={handler:Be[t],type:t},"rotate"===t){var o,i=Ae.S5(),a=Te(r);try{for(a.s();!(o=a.n()).done;){var l=o.value,c=l.getGeometry();(0,Pe.aP)(l.getId())?Ae.X$(i,Ae.Tr([c.getFirstCoordinate()])):Ae.X$(i,c.getExtent())}}catch(e){a.e(e)}finally{a.f()}if(n.transformation_.center=Ae.q1(i),(0,Pe.Mc)(n.lastFeature_.getId())===Pe.gP){var u=(0,Ce.kh)(je.Ay.getState());n.transformation_.center=(0,S.Ur)([u.lon,u.lat])}n.transformation_.pivot=e.coordinate}return n.transformation_.lastAngle=0,n.dispatchEvent(new Ye(Ze.TRANSFORM_START,t,r,e.coordinate,[0,0],0,n.transformation_.center)),!0}return!1},handleDragEvent:function(e){if(!(n.targetPointers.length>1)&&n.lastCoordinate_){var t,r=e.coordinate,o=r[0]-n.lastCoordinate_[0],i=r[1]-n.lastCoordinate_[1],a=n.calculateTotalDelta_(),l=n.features_,c=n.transformation_.type,u=Te(l);try{for(u.s();!(t=u.n()).done;){var s=t.value,f=s.getGeometry();n.transformation_.handler(f,o,i,a),s.setGeometry(f)}}catch(e){u.e(e)}finally{u.f()}n.lastCoordinate_=r,n.dispatchEvent(new Ye(Ze.TRANSFORMING,c,l,r,a,n.transformation_.lastAngle,n.transformation_.center))}},handleUpEvent:function(e){if(n.lastCoordinate_){var t=n.features_,r=n.calculateTotalDelta_(),o=n.transformation_,i=o.center,a=o.lastAngle,l=o.type;return n.firstCoordinate_=null,n.lastCoordinate_=null,n.features_=null,n.transformation_=null,n.dispatchEvent(new Ye(Ze.TRANSFORM_END,l,t,e.coordinate,r,a,i)),!0}return!1}}]),Ue(n,"featureAtPixel_",(function(e,t,r){var o;return r&&t.forEachFeatureAtPixel(e,(function(e){if(r.includes(e))return o=e,!0}),{hitTolerance:n.hitTolerance_,layerFilter:n.layerFilter_}),o}));var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({moveCondition:b.Gk,rotateCondition:b.Zm},e);return n.firstCoordinate_=null,n.lastCoordinate_=null,n.features_=null,n.featureProvider_=r.featureProvider,n.layerFilter_=n.createLayerFilterFromOptions_(r),n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.lastFeature_=null,n.moveCondition_=r.moveCondition,n.rotateCondition_=r.rotateCondition,n.transformation_=null,n}return Ve(t,e),Re(t,[{key:"calculateTotalDelta_",value:function(){return[this.lastCoordinate_[0]-this.firstCoordinate_[0],this.lastCoordinate_[1]-this.firstCoordinate_[1]]}},{key:"createLayerFilterFromOptions_",value:function(e){if(e.layers){if("function"==typeof e.layers)return e.layers;var t=e.layers;return function(e){return t.includes(e)}}return T}},{key:"decideTypeFromEvent_",value:function(e){var t;if(0===(null==e?void 0:e.button)||0===(null==e||null===(t=e.originalEvent)||void 0===t?void 0:t.button)){if(this.moveCondition_(e))return"move";if(this.rotateCondition_(e))return"rotate"}}}])}(Se.A),Ze={TRANSFORM_START:"transformStart",TRANSFORMING:"transforming",TRANSFORM_END:"transformEnd"},Ye=function(e){function t(e,n,r,o,i){var a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return Me(this,t),(a=Le(this,t,[e])).subType=n,a.features=r,a.coordinate=o,a.delta=i,a.angleDelta=l,a.origin=c,a}return Ve(t,e),Re(t,[{key:"hasMoved",get:function(){return this.delta&&Array.isArray(this.delta)&&(0!==this.delta[0]||0!==this.delta[1])||this.angleDelta&&0!==this.angleDelta}}])}(Ee.Ay);const He=(0,A.createOLInteractionComponent)("TransformFeatures",(function(e){return new We(e)}),{propTypes:{featureProvider:p().func.isRequired,hitTolerance:p().number,layers:p().oneOfType([p().func,p().arrayOf(O.default)]),moveCondition:p().func,rotateCondition:p().func,onTransformEnd:p().func,onTransforming:p().func,onTransformStart:p().func},events:["transformStart","transforming","transformEnd"],eventMap:{onTransformStart:"transformStart",onTransforming:"transforming",onTransformEnd:"transformEnd"},fragileProps:["featureProvider","hitTolerance","layers","moveCondition","rotateCondition"]});var qe=n(5876),Ke=(n(28706),n(78350),n(48598),n(30237),n(32389)),$e=n(48672),Je=n(42460),Xe=n(24709),Qe=n(76271),et=n(78964),tt=n(89645),nt=n(46737),rt=n(117),ot=n(40410),it=n(6768),at=n(47546),lt=n(60276),ct=n(920),ut=n(95126);const st=(0,ut.A)(y.createElement("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"}),"ContentCut"),ft=(0,ut.A)(y.createElement("path",{d:"M3 3 L20.38 15.16 L15.16 20.38 L3 3z"}),"EditFeature");var dt=n(19023);function pt(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vt={"add-marker":{tool:dt.NL.DRAW_POINT,label:(0,ct.tt)("DrawingToolbar.addMarker"),icon:Qe.A},"add-waypoint":{tool:dt.NL.ADD_WAYPOINT,label:(0,ct.tt)("DrawingToolbar.addWaypoint"),icon:tt.A},"cut-hole":{tool:dt.NL.CUT_HOLE,label:(0,ct.tt)("DrawingToolbar.cutHole"),icon:st},"draw-circle":{tool:dt.NL.DRAW_CIRCLE,label:(0,ct.tt)("DrawingToolbar.drawCircle"),icon:et.A},"draw-path":{tool:dt.NL.DRAW_PATH,label:(0,ct.tt)("DrawingToolbar.drawPath"),icon:rt.A},"draw-polygon":{tool:dt.NL.DRAW_POLYGON,label:(0,ct.tt)("DrawingToolbar.drawPolygon"),icon:ot.A},"draw-rectangle":{tool:dt.NL.DRAW_RECTANGLE,label:(0,ct.tt)("DrawingToolbar.drawRectangle"),icon:Xe.A},"edit-feature":{tool:dt.NL.EDIT_FEATURE,label:(0,ct.tt)("DrawingToolbar.editFeature"),icon:ft},select:{tool:dt.NL.SELECT,label:(0,ct.tt)("general.action.select"),icon:nt.A},zoom:{tool:dt.NL.ZOOM,label:(0,ct.tt)("general.geometry.zoom"),icon:it.A}},mt=function(e){var t=e.onToolSelected,n=e.selectedTool,o=e.t,i=function(e){return n===e?"primary":void 0};return y.createElement("div",{style:{display:"flex",flexFlow:"column nowrap"}},r.A.map.drawingTools.flatMap((function(e){return[y.createElement($e.A,{key:"drawing-toolbar-group:".concat(e.join(","))})].concat(pt(e.map((function(e){var n=vt[e],r=n.tool,a=n.label,l=n.icon;return y.createElement(at.W1,{key:e,content:a(o),placement:"right"},y.createElement(Je.A,{onClick:(0,u.A)(t,r)},y.createElement(l,{color:i(r)})))}))))})).slice(1))};mt.propTypes={onToolSelected:p().func,selectedTool:p().string,t:p().func};const bt=(0,v.Ng)((function(e){return{selectedTool:(0,lt._6)(e)}}),{onToolSelected:lt._y})((0,Ke.CI)()(mt));n(66412),n(78125),n(4731),n(60479),n(3362);var ht=n(61466),gt=n(84630),wt=n(47201),_t=n(24711),Ot=n(26837),Et=n(96563),At=n(7756),St=n(51338),Ct=n(28540),Pt=n(79495),jt=n(77701),Ft=n(84639),kt=n(92474),Tt=n(49406),xt=n(78614),Mt=n(41012),Dt=n(66265),Rt=n(1081),Lt=n(19008);function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wt(r.key),r)}}function Vt(e,t,n){return t=Ut(t),function(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zt()?Reflect.construct(t,n||[],Ut(e).constructor):t.apply(e,n))}function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zt=function(){return!!e})()}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Gt(e,t){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gt(e,t)}function Bt(e,t,n){return(t=Wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e){var t=function(e,t){if("object"!=It(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==It(t)?t:t+""}var Zt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Bt(e=Vt(this,t,[].concat(r)),"state",{open:!1,opening:!1,position:{top:0,left:0},context:void 0}),Bt(e,"_handleClose",(function(){document.body.removeEventListener("contextmenu",e._preventDefault),e.setState({open:!1,opening:!1})})),Bt(e,"_preventDefault",(function(t){e.state.opening?e.setState({opening:!1,open:!0}):e._handleClose(),t.preventDefault()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,t){var n=this.props.contextProvider;this.context.addEventListener("contextmenu",this._preventDefault),this.setState({opening:!0,open:!1,context:n?n(t):t,position:e})}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state,r=n.context,o=n.open,i=n.opening,a=n.position,l=(0,F.default)(t)?t(r||{}):t,c=y.Children.map(l,(function(t){return y.cloneElement(t,{onClick:t.props.onClick?function(n){t.props.onClick(n,r),e._handleClose()}:function(){e._handleClose()}})}));return y.createElement(at.kF,{open:o||i,anchorReference:"anchorPosition",anchorPosition:a,onClose:this._handleClose},y.createElement(Lt.A,null,c))}}])&&Nt(n.prototype,r),o&&Nt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(y.Component);Bt(Zt,"contextType",at.Bz),Bt(Zt,"propTypes",{children:p().oneOfType([p().node,p().func]),contextProvider:p().func});var Yt=n(69358),Ht=n(16160),qt=n(2431),Kt=n(45056),$t=n(39064),Jt=n(11338),Xt=n(85448),Qt=n(85949),en=n(53855),tn=n(53054),nn=n(23809),rn=n(72819),on=n(6659),an=n(11104),ln=n(12152),cn=n(48190);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(){fn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new k(r||[]);return o(a,"_invoke",{value:C(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",m={};function b(){}function h(){}function g(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(T([])));O&&O!==n&&r.call(O,a)&&(w=O);var E=g.prototype=b.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==un(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var c=P(l,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(un(t)+" is not iterable")}return h.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:h,configurable:!0}),h.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function dn(e){return function(e){if(Array.isArray(e))return pn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_n(r.key),r)}}function mn(e,t,n){return t=hn(t),function(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bn()?Reflect.construct(t,n||[],hn(e).constructor):t.apply(e,n))}function bn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bn=function(){return!!e})()}function hn(e){return hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hn(e)}function gn(e,t){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gn(e,t)}function wn(e,t,n){return(t=_n(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e){var t=function(e,t){if("object"!=un(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==un(t)?t:t+""}var On=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wn(e=mn(this,t),"open",(function(t,n){e._contextMenu.current&&e._contextMenu.current.open(t,n)})),wn(e,"_addPointToMission",(function(t,n){var r=n.coords,o=e.props.addPointToMission;o&&o({lat:r[1],lon:r[0]})})),wn(e,"_moveSelectedUAVsAtCurrentAltitude",(function(e,t){var n=t.coords,r=t.selectedUAVIds;$t.hU(r,{target:{lat:n[1],lon:n[0]}})})),wn(e,"_moveSelectedUAVsAtGivenAltitude",function(){var t,n=(t=fn().mark((function t(n,r){var o,i;return fn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=dn(r.coords),i=dn(r.selectedUAVIds),e.props.showFlyToTargetDialog({coords:o,uavIds:i});case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){yn(i,r,o,a,l,"next",e)}function l(e){yn(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()),wn(e,"_cutSelectedFeatures",(function(t,n){var r=e.props.cutFeature,o=n.selectedFeatures;r&&r(o[1].id,o[0].id)})),wn(e,"_editSelectedFeature",(function(t,n){var r=e.props.editFeature,o=n.selectedFeatures;r&&r(o[0].id)})),wn(e,"_takeoffSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.CZ(n)})),wn(e,"_landSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.jF(n)})),wn(e,"_positionHoldSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.Ys(n)})),wn(e,"_unsetSelectedFeatureAsGeofence",(function(t,n){var r=e.props.clearGeofencePolygonId;r&&r()})),wn(e,"_setSelectedFeatureAsGeofence",(function(t,n){var r,o=e.props.setGeofencePolygonId,i=n.selectedFeatures;o&&(null!==(r=i[0].attributes)&&void 0!==r&&r.isExclusionZone&&e._unsetSelectedFeatureAsExclusionZone(t,n),o(i[0].id))})),wn(e,"_unsetSelectedFeatureAsExclusionZone",(function(t,n){var r=e.props.updateFeatureAttributes,o=n.selectedFeatures;r&&r({id:o[0].id,attributes:{isExclusionZone:!1}})})),wn(e,"_setSelectedFeatureAsExclusionZone",(function(t,n){var r=e.props.updateFeatureAttributes,o=n.geofencePolygonId,i=n.selectedFeatures;r&&(i[0].id===o&&e._unsetSelectedFeatureAsGeofence(t,n),r({id:i[0].id,attributes:{isExclusionZone:!0}}))})),wn(e,"_openDetailsDialogForSelectedUAVs",(function(t,n){var r=n.selectedUAVIds,o=e.props.openUAVDetailsDialog;o&&r.length>0&&o(r[0])})),wn(e,"_removeSelectedFeatures",(function(t,n){var r=n.selectedFeatures,o=e.props.removeFeaturesByIds;o&&o(r.map((function(e){return e.id})))})),wn(e,"_resetUAVs",(function(e,t){var n=t.selectedUAVIds;$t.bf(n)})),wn(e,"_returnSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.kZ(n)})),wn(e,"_setMapCoordinateSystemOrigin",(function(t,n){var r=n.coords;r&&e.props.setMapCoordinateSystemOrigin(r)})),wn(e,"_setShowCoordinateSystemOrigin",(function(t,n){var r=n.coords;r&&e.props.setShowCoordinateSystemOrigin(r)})),wn(e,"_sleepSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.fd(n)})),wn(e,"_shutdownSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.Y_(n)})),wn(e,"_wakeUpSelectedUAVs",(function(e,t){var n=t.selectedUAVIds;$t.dg(n)})),e._contextMenu=y.createRef(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return y.createElement(Ke.wD,null,(function(t){return y.createElement(Zt,{ref:e._contextMenu,contextProvider:e.props.contextProvider},(function(n){var r,o,i=n.selectedFeatures,a=n.selectedUAVIds,l=n.geofencePolygonId,c=[],u=(null==i?void 0:i.length)>0,s=1===(null==i?void 0:i.length),f=(null==a?void 0:a.length)>0,d=1===(null==a?void 0:a.length);if(f&&c.push(y.createElement(gt.A,{key:"fly",dense:!0,onClick:e._moveSelectedUAVsAtCurrentAltitude},y.createElement(ht.A,null,y.createElement(St.A,null)),t("mapContextMenu.flyHere")),y.createElement(gt.A,{key:"flyAtAltitude",dense:!0,onClick:e._moveSelectedUAVsAtGivenAltitude},y.createElement(ht.A,null,y.createElement(St.A,null)),t("mapContextMenu.flyHereAtAltitude")),y.createElement($e.A,{key:"div1"}),y.createElement(gt.A,{key:"takeoff",dense:!0,onClick:e._takeoffSelectedUAVs},y.createElement(ht.A,null,y.createElement(Ct.A,null)),t("general.commands.takeoff")),y.createElement(gt.A,{key:"poshold",dense:!0,onClick:e._positionHoldSelectedUAVs},y.createElement(ht.A,null,y.createElement(Tt.A,null)),t("general.commands.positionHold")),y.createElement(gt.A,{key:"home",dense:!0,onClick:e._returnSelectedUAVs},y.createElement(ht.A,null,y.createElement(Ft.A,null)),t("general.commands.returnToHome")),y.createElement(gt.A,{key:"land",dense:!0,onClick:e._landSelectedUAVs},y.createElement(ht.A,null,y.createElement(Pt.A,null)),t("general.commands.land")),y.createElement($e.A,{key:"div2"}),y.createElement(gt.A,{key:"message",dense:!0,disabled:!d,onClick:e._openDetailsDialogForSelectedUAVs},y.createElement(ht.A,null,y.createElement(Ot.A,null)),t("mapContextMenu.details")),y.createElement($e.A,{key:"div3"}),y.createElement(gt.A,{key:"wakeUp",dense:!0,onClick:e._wakeUpSelectedUAVs},y.createElement(ht.A,null,y.createElement(Yt.A,null)),t("general.commands.powerOn")),y.createElement(gt.A,{key:"sleep",dense:!0,onClick:e._sleepSelectedUAVs},y.createElement(ht.A,null,y.createElement(kt.A,null)),t("general.commands.sleep")),y.createElement(gt.A,{key:"reset",dense:!0,onClick:e._resetUAVs},y.createElement(ht.A,null,y.createElement(Dt.A,{color:"secondary"})),t("general.commands.reboot")),y.createElement(gt.A,{key:"shutdown",dense:!0,onClick:e._shutdownSelectedUAVs},y.createElement(ht.A,null,y.createElement(xt.A,{color:"secondary"})),t("general.commands.powerOff")),y.createElement($e.A,{key:"div4"})),e.props.addPointToMission&&c.push(y.createElement(gt.A,{key:"addPointToMission",dense:!0,onClick:e._addPointToMission},y.createElement(ht.A,null,y.createElement(wt.A,null)),"Add point to mission")),e.props.setMapCoordinateSystemOrigin&&c.push(y.createElement(gt.A,{key:"setMapCoordinateSystemOrigin",dense:!0,onClick:e._setMapCoordinateSystemOrigin},y.createElement(ht.A,null,y.createElement(Mt.A,null)),t("mapContextMenu.setMapOriginHere"))),e.props.setShowCoordinateSystemOrigin&&c.push(y.createElement(gt.A,{key:"setShowCoordinateSystemOrigin",dense:!0,onClick:e._setShowCoordinateSystemOrigin},y.createElement(ht.A,null,y.createElement(jt.A,null)),t("mapContextMenu.setShowOriginHere"))),s){var p,v=[qt.lo.POLYGON].includes(i[0].type),m=i[0].id===l;c.push(y.createElement($e.A,{key:"div5"}),y.createElement(gt.A,{key:"geofence",dense:!0,disabled:!v,onClick:m?e._unsetSelectedFeatureAsGeofence:e._setSelectedFeatureAsGeofence},y.createElement(ht.A,null,y.createElement(Ht.A,{color:m?"disabled":"action"})),t(m?"mapContextMenu.clearGeofence":"mapContextMenu.useAsGeofence")));var b=[qt.lo.POLYGON].includes(i[0].type),h=null===(p=i[0].attributes)||void 0===p?void 0:p.isExclusionZone;c.push(y.createElement(gt.A,{key:"exclusionZone",dense:!0,disabled:!b,onClick:h?e._unsetSelectedFeatureAsExclusionZone:e._setSelectedFeatureAsExclusionZone},y.createElement(ht.A,null,y.createElement(Et.A,{color:h?"disabled":"action"})),h?"Clear exclusion zone":"Use as exclusion zone"))}return u&&2===i.length&&i.every((function(e){return e.type===qt.lo.POLYGON}))&&c.push(y.createElement(gt.A,{key:"cut",dense:!0,onClick:e._cutSelectedFeatures},y.createElement(ht.A,null,y.createElement(st,null)),t("mapContextMenu.subtractPolygon",{minuend:null!==(r=i[1].label)&&void 0!==r?r:t("mapContextMenu.unnamedPolygon"),subtrahend:null!==(o=i[0].label)&&void 0!==o?o:t("mapContextMenu.unnamedPolygon")}))),u&&c.push(y.createElement($e.A,{key:"div6"}),y.createElement(gt.A,{key:"setProperties",dense:!0,disabled:!s,onClick:e._editSelectedFeature},y.createElement(ht.A,null,y.createElement(At.A,null)),t("mapContextMenu.properties")),y.createElement(gt.A,{key:"remove",dense:!0,disabled:!u,onClick:e._removeSelectedFeatures},y.createElement(ht.A,null,y.createElement(_t.A,null)),t("general.action.remove"))),c}))}))}}])&&vn(n.prototype,r),o&&vn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(y.Component);wn(On,"propTypes",{addPointToMission:p().func,clearGeofencePolygonId:p().func,contextProvider:p().func,cutFeature:p().func,editFeature:p().func,openUAVDetailsDialog:p().func,removeFeaturesByIds:p().func,setGeofencePolygonId:p().func,setMapCoordinateSystemOrigin:p().func,setShowCoordinateSystemOrigin:p().func,showFlyToTargetDialog:p().func,updateFeatureAttributes:p().func});var En=(0,Kt.jI)("mapFeatures"),An=(0,Kt.jI)("missionEditor"),Sn=(0,Kt.jI)("geofence"),Cn=(0,Kt.jI)("showControl"),Pn=(0,Rt.createSelector)(Qt.TX,cn.YZ,rn.Md,(function(e,t,n){return function(r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selectedFeatures:e,selectedUAVIds:t,geofencePolygonId:n},r)}}));const jn=(0,v.Ng)((function(e){return{contextProvider:Pn(e)}}),{addPointToMission:An?tn.ut:null,clearGeofencePolygonId:Sn?nn.Xg:null,cutFeature:En?Xt.Du:null,editFeature:En?Xt.jQ:null,openUAVDetailsDialog:ln.Te,removeFeaturesByIds:En?en.Hk:null,setGeofencePolygonId:Sn?nn.kl:null,setMapCoordinateSystemOrigin:Jt.dK,setShowCoordinateSystemOrigin:Cn?function(e){return(0,on.mm)({origin:e,setupMission:!0})}:null,showFlyToTargetDialog:an.Q,updateFeatureAttributes:en.Te},null,{forwardRef:!0})(On);var Fn=n(98999);function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ln(r.key),r)}}function xn(e,t,n){return t=Dn(t),function(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mn()?Reflect.construct(t,n||[],Dn(e).constructor):t.apply(e,n))}function Mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mn=function(){return!!e})()}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}function Rn(e,t){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rn(e,t)}function Ln(e){var t=function(e,t){if("object"!=kn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kn(t)?t:t+""}var In,Nn,Vn,zn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=xn(this,t,[e]),Fn.J5.add(n._onMapReferenceRequested.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return!1}},{key:"_onMapReferenceRequested",value:function(e){e(this.props.map)}}])&&Tn(n.prototype,r),o&&Tn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(y.Component);In=zn,Nn="propTypes",Vn={map:p().instanceOf(Y.default)},(Nn=Ln(Nn))in In?Object.defineProperty(In,Nn,{value:Vn,enumerable:!0,configurable:!0,writable:!0}):In[Nn]=Vn;const Un=(0,m.RM)(zn);var Gn=n(7639),Bn=n(36549),Wn=n(34098),Zn=n(93474),Yn=n(98029),Hn=n(12857);function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tr(r.key),r)}}function $n(e,t,n){return t=Xn(t),function(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jn()?Reflect.construct(t,n||[],Xn(e).constructor):t.apply(e,n))}function Jn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jn=function(){return!!e})()}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}function Qn(e,t){return Qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qn(e,t)}function er(e,t,n){return(t=tr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tr(e){var t=function(e,t){if("object"!=qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qn(t)?t:t+""}var nr=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return er(e=$n(this,t,[].concat(r)),"_bindings",{}),er(e,"_getExtentsToZoomTo",(function(t){var n="drones"===t?Pe.wy:void 0;switch(t){case"all":case"drones":var r=e.map.getLayers().getArray().filter((function(e){return e&&e.getVisible()&&e instanceof E.default})),o=(0,Wn.A)(r.map((function(e){return e.getSource().getFeatures()})));return(n?o.filter((function(e){return n(e.getId())})):o).map((function(e){var t=e.getGeometry();return t?t.getExtent():void 0})).filter(Boolean);default:return e._getExtentsToZoomTo("all")}})),er(e,"_onMapReferenceReceived",(function(t){e.map=t})),er(e,"_handleClick",(function(){if(e.map){var t=e._getExtentsToZoomTo(e.props.target);if(0===t.length)"geolocation"in window.navigator?window.navigator.geolocation.getCurrentPosition(e._onGeolocationReceived,e._onGeolocationError):e.props.showError("There are no features to fit into the view, and geolocation is not available");else{var n=(0,S.SK)(t);Fn.Lp.dispatch(n,{padding:e.props.margin})}}})),er(e,"_onGeolocationReceived",(function(t){if(e.map){var n=e.map.getView(),r=(0,S.Ur)([t.coords.longitude,t.coords.latitude]);n.animate({center:r,duration:e.props.duration,easing:Zn.vT})}})),er(e,"_onGeolocationError",(function(t){var n=e.props.showError;if(n){var r;switch(t.code){case 1:r="Could not retrieve your location: permission denied";break;case 2:r="Error while retrieveing your location; try again later";break;case 3:r="Timeout while retrieving your locaiton; try again later";break;default:r="An unexpected error happened while retrieving your location"}n(r)}else;})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._bindings.fitAllFeatures=Fn.aU.add(this._handleClick),Fn.J5.dispatch(this._onMapReferenceReceived)}},{key:"componentWillUnmount",value:function(){Fn.aU.detach(this._bindings.fitAllFeatures),delete this._bindings.fitAllFeatures}},{key:"render",value:function(){var e=this,t=this.props.target;return y.createElement(Ke.wD,null,(function(n){return y.createElement(at.W1,{content:n("drones"===t?"fitAllFeaturesButton.fitAllDrones":"fitAllFeaturesButton.fitAllFeatures")},y.createElement(Je.A,{onClick:e._handleClick},y.createElement(Yn.A,null)))}))}}])&&Kn(n.prototype,r),o&&Kn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(y.Component);er(nr,"propTypes",{duration:p().number,margin:p().number,showError:p().func,target:p().oneOf(["drones","all"])}),er(nr,"defaultProps",{target:"drones"});const rr=(0,v.Ng)(null,{showError:Hn.Qg})(nr);var or=n(74022),ir=n(71762),ar=n(72572);function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yr(r.key),r)}}function ur(e,t,n){return t=fr(t),function(e,t){if(t&&("object"===lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sr()?Reflect.construct(t,n||[],fr(e).constructor):t.apply(e,n))}function sr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sr=function(){return!!e})()}function fr(e){return fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fr(e)}function dr(e,t){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dr(e,t)}function pr(e,t,n){return(t=yr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yr(e){var t=function(e,t){if("object"!=lr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lr(t)?t:t+""}var vr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pr(n=ur(this,t,[e]),"state",{isFocused:!1,rotation:0}),n._onMapReferenceReceived=n._onMapReferenceReceived.bind(n),n._updateRotationFromMapView=(0,or.A)(n._updateRotationFromMapView.bind(n),100),n._onFocus=n._onFocus.bind(n),n._onBlur=n._onBlur.bind(n),n._onChange=n._onChange.bind(n),n._onKeyDown=n._onKeyDown.bind(n),n._onButtonClick=n._onButtonClick.bind(n),Fn.Ak.add(n._onButtonClick),Fn.J5.dispatch(n._onMapReferenceReceived),n.state.rotation=(0,S.n0)(e.initialRotation||0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dr(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this;return y.createElement("div",{style:this.props.style},y.createElement(Ke.wD,null,(function(t){return y.createElement(at.W1,{content:t("map.resetRotation")},y.createElement(Je.A,{onClick:e._onButtonClick},y.createElement(ir.A,null)))})),y.createElement(ar.A,{size:"small",style:{padding:"8px 0",width:this.props.fieldWidth},type:"number",value:this.state.isFocused?this.state.rotation:(0,S.n0)(this.state.rotation),variant:"standard",onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onChange,onKeyDown:this._onKeyDown}))}},{key:"_onMapReferenceReceived",value:function(e){var t=this,n=e?e.getView():void 0;this.map=e,n&&n.on("change:rotation",this._updateRotationFromMapView),e.on("change:view",(function(n){e.getView().on("change:rotation",t._updateRotationFromMapView)}))}},{key:"_updateRotationFromMapView",value:function(e){this.setState({rotation:(0,C.xW)(-e.target.get("rotation"))})}},{key:"_onFocus",value:function(){this.setState((function(e){return{isFocused:!0,rotation:(0,S.n0)(e.rotation)}}))}},{key:"_onBlur",value:function(){this.setState({isFocused:!1})}},{key:"_onChange",value:function(e){this.map.getView().setRotation((0,C.eh)(-e.target.value)),this.setState({rotation:e.target.value})}},{key:"_onKeyDown",value:function(e){"Enter"===e.key&&e.target.blur()}},{key:"_onButtonClick",value:function(){this.map.getView().animate({rotation:0,duration:this.props.resetDuration,easing:Zn.vT})}}],r&&cr(n.prototype,r),o&&cr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(y.Component);pr(vr,"propTypes",{initialRotation:p().oneOfType([p().number,p().string]),resetDuration:p().number,fieldWidth:p().string,style:p().object});var mr=function(){return y.createElement("div",{style:{display:"inline-block",height:"48px",borderLeft:"1px solid rgba(0, 0, 0,  0.172549)",verticalAlign:"top"}})},br=function(e){var t=e.initialRotation;return y.createElement("div",null,y.createElement(vr,{initialRotation:t,resetDuration:500,fieldWidth:"75px",style:{display:"inline-block",marginRight:"12px",verticalAlign:"top"}}),y.createElement(mr,null),y.createElement(rr,{duration:500,margin:80}))};br.propTypes={initialRotation:p().number};const hr=(0,v.Ng)((function(e){return{selectedTool:(0,lt._6)(e),initialRotation:(0,Bn.Ts)(e)}}),null)((0,Gn.A)(br));var gr=n(3148),wr=n(60083),_r=function(e){var t=e.children,n=e.showControls,r=e.style,o=!!n&&y.createElement("div",{className:"widget-action-bar"},y.createElement(Je.A,null,y.createElement(wr.default,null)));return y.createElement(gr.A,{className:"widget",style:r},o,t)};_r.propTypes={children:p().oneOfType([p().arrayOf(p().node),p().node]),showControls:p().bool,style:p().object},_r.defaultProps={children:[],showControls:!0,style:{}};const Or=_r;var Er=n(88276),Ar=n(34902),Sr=n(48034),Cr=n(36345),Pr=n(92523),jr=n(41917),Fr=n(18593),kr=n(1694),Tr=n(48182),xr=jr.A.isFinite,Mr=Math.min;const Dr=function(e){var t=Math[e];return function(e,n){if(e=(0,kr.A)(e),(n=null==n?0:Mr((0,Fr.A)(n),292))&&xr(e)){var r=((0,Tr.A)(e)+"e").split("e"),o=t(r[0]+"e"+(+r[1]+n));return+((r=((0,Tr.A)(o)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}};const Rr=Dr("round");function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Ir(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Br(r.key),r)}}function Gr(e,t,n){return(t=Br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Br(e){var t=function(e,t){if("object"!=Lr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lr(t)?t:t+""}var Wr=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gr(this,"initialize",(function(){Fn.J5.dispatch(t._onMapReferenceReceived)})),Gr(this,"fitMapViewToExtent",(function(e,n){var r=zr({duration:1e3,padding:0},n),o=r.duration,i=r.padding;(0,Ae.Im)(e)||(t.view?t.view.fit((0,g.fromExtent)(e),{duration:o,padding:"number"==typeof i?[i,i,i,i]:i}):t._handleNoMapView())})),Gr(this,"scrollMapViewToLocation",(function(e,n){var r=e.center,o=e.rotation,i=e.zoom,a={duration:zr({duration:1e3},n).duration};void 0!==r&&(a.center=(0,S.Ur)([r.lon,r.lat])),void 0!==o&&(a.rotation=(0,C.eh)(-o)),void 0!==i&&(a.zoom=i),t.view?t.view.animate(a):t._handleNoMapView()})),Gr(this,"_onMapReferenceReceived",(function(e){t.map=e,t.view=e.getView(),t.view.on("propertychange",t._onViewPropertyChanged),e.on("propertychange",(function(n){"view"===n.key&&(t.view.un("propertychange",t._onViewPropertyChanged),t.view=e.getView(),t.view.on("propertychange",t._onViewPropertyChanged))}))})),Gr(this,"_onViewPropertyChanged",(function(e){switch(e.key){case"center":var n,r=(0,S.Al)(t.view.getCenter()).map((function(e){return Rr(e,6)})),o=Ir(t.callbacks.center);try{for(o.s();!(n=o.n()).done;)(0,n.value)({lon:r[0],lat:r[1]})}catch(e){o.e(e)}finally{o.f()}break;case"rotation":var i,a=(0,C.xW)(-t.view.getRotation()),l=Ir(t.callbacks.rotation);try{for(l.s();!(i=l.n()).done;)(0,i.value)((0,S.n0)(a))}catch(e){l.e(e)}finally{l.f()}break;case"resolution":var c,u=t.view.getZoom(),s=Ir(t.callbacks.zoom);try{for(s.s();!(c=s.n()).done;)(0,c.value)(u)}catch(e){s.e(e)}finally{s.f()}}})),Gr(this,"addListener",(function(e,n){if(!(e in t.callbacks))throw new Error("Cannot add listener to unknown property: ".concat(e,"."));t.callbacks[e]=t.callbacks[e].concat(n)})),Gr(this,"removeListener",(function(e,n){if(!(e in t.callbacks))throw new Error("Cannot remove listener from unknown property: ".concat(e,"."));if(!t.callbacks[e].includes(n))throw new Error("Cannot remove event listener that has not yet been added.");t.callbacks[e]=t.callbacks[e].filter((function(e){return e!==n}))})),this.callbacks={center:[],rotation:[],zoom:[]},Fn.i7.add(this.scrollMapViewToLocation),Fn.Lp.add(this.fitMapViewToExtent)},(t=[{key:"_handleNoMapView",value:function(){}}])&&Ur(e.prototype,t),n&&Ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Zr=new Wr;var Yr=n(23354),Hr=n(12209),qr=n(49648),Kr=n(37796),$r=n(17558),Jr=n(53645),Xr=n(39142);const Qr=(e,t,n=(0,Xr.A)(!0))=>{t.extend(e.getArray().filter(n)),e.on("add",(e=>{n(e.element)&&t.push(e.element)})),e.on("remove",(e=>{n(e.element)&&t.remove(e.element)}))};var eo=n(85072),to=n.n(eo),no=n(97825),ro=n.n(no),oo=n(77659),io=n.n(oo),ao=n(55056),lo=n.n(ao),co=n(10540),uo=n.n(co),so=n(41113),fo=n.n(so),po=n(74096),yo={};yo.styleTagTransform=fo(),yo.setAttributes=lo(),yo.insert=io().bind(null,"head"),yo.domAPI=ro(),yo.insertStyleElement=uo();to()(po.A,yo);po.A&&po.A.locals&&po.A.locals;function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||Po(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,So(r.key),r)}}function ho(e,t,n){return t=wo(t),function(e,t){if(t&&("object"===vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,go()?Reflect.construct(t,n||[],wo(e).constructor):t.apply(e,n))}function go(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(go=function(){return!!e})()}function wo(e){return wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wo(e)}function _o(e,t){return _o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_o(e,t)}function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oo.apply(this,arguments)}function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e,t,n){return(t=So(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function So(e){var t=function(e,t){if("object"!=vo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vo(t)?t:t+""}function Co(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Po(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Po(e,t){if(e){if("string"==typeof e)return jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jo(e,t):void 0}}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fo=function(e){var t,n=e.layers,r=e.onFeaturesModified,o=e.selectedTool,i=0,a=[],l=Co(n);try{for(l.s();!(t=l.n()).done;){var c=t.value;c.type in qe.zg&&(a.push((0,qe.VE)(c,{onFeaturesModified:r,selectedTool:o,zIndex:i})),i++)}}catch(e){l.e(e)}finally{l.f()}return a};Fo.propTypes={layers:p().arrayOf(p().object),onFeaturesModified:p().func,selectedTool:p().string.isRequired};var ko=(0,v.Ng)((function(e){return{layers:(0,$r.Mc)(e),selectedTool:(0,lt._6)(e)}}))(Fo),To=function(e){var t=e.formatCoordinate,n=e.showMouseCoordinates,r=e.showScaleLine;return y.createElement(y.Fragment,null,y.createElement(m.A4.Zoom,null),y.createElement(m.A4.Attribution,{collapsed:!0,collapsible:!0,collapseLabel:"\xab"}),n&&y.createElement(m.A4.MousePosition,{key:"control.MousePosition",hideWhenOut:!0,projection:"EPSG:4326",coordinateFormat:t}),r&&y.createElement(m.A4.ScaleLine,{key:"control.ScaleLine",minWidth:128}))};To.propTypes={formatCoordinate:p().func,showMouseCoordinates:p().bool,showScaleLine:p().bool};var xo=(0,v.Ng)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){Ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({formatCoordinate:(0,Kr.ap)(e)},e.settings.display)}))(To),Mo=function(){var e=[];return e.push(y.createElement(Or,{key:"Widget.MapToolbar",style:{top:8,left:40},showControls:!1},y.createElement(hr,null))),(0,Kt.jI)("mapFeatures")&&e.push(y.createElement(Or,{key:"Widget.DrawingToolbar",style:{top:64,left:8},showControls:!1},y.createElement(bt,null))),e},Do=(0,m.RM)((function(e){var t=e.geofencePolygonId,n=e.onAddFeaturesToSelection,r=e.onAddWaypoint,o=e.onDrawEnded,i=e.onFeatureModificationStarted,a=e.onFeaturesModified,l=e.onFeaturesTransformed,c=e.onNearestFeatureChanged,u=e.onRemoveFeaturesFromSelection,f=e.onSetSelectedFeatures,d=e.onSingleFeatureSelected,p=e.selectedFeaturesProvider,v=e.selectedTool,h=(0,y.useCallback)((function(e){var n;null===(n=e.features.getArray().find((function(e){return e.getId()===(0,Pe.Du)(t)})))||void 0===n||n.getGeometry().on("change",M),null==i||i(e)}),[i,t]),g=(0,y.useCallback)((function(e){var n;null===(n=e.features.getArray().find((function(e){return e.getId()===(0,Pe.Du)(t)})))||void 0===n||n.getGeometry().un("change",M),null==a||a(e)}),[a,t]),w=[];w.push(y.createElement(m.vY.DragRotate,{key:"DragRotate",condition:b.IO}),y.createElement(m.vY.DragRotateAndZoom,{key:"DragRotateAndZoom",condition:b.IT}),y.createElement(Oe,{key:"TrackNearestFeature",layers:Yr.xe,hitTolerance:4,onNearestFeatureChanged:c})),v===dt.NL.PAN&&w.push(y.createElement(m.vY.DragBox,{key:"DragBox.setSelection",condition:b.k5,onBoxEnd:f})),v===dt.NL.SELECT&&w.push(y.createElement(W,{key:"SelectNearestFeature",activateCondition:b.qG,addCondition:b.Kg,layers:Yr.T9,removeCondition:b.Js,toggleCondition:b.k5,threshold:16,onSelect:d}),y.createElement(m.vY.DragBox,{key:"DragBox.addToSelection",condition:b.Kg,onBoxEnd:n}),y.createElement(m.vY.DragBox,{key:"DragBox.removeFromSelection",condition:b.Js,onBoxEnd:u}),y.createElement(He,{key:"TransformFeatures",featureProvider:p,moveCondition:b.TS,rotateCondition:b.Js,onTransformEnd:l})),v===dt.NL.ZOOM&&w.push(y.createElement(m.vY.DragZoom,{key:"DragZoom.in",condition:b.Gk}),y.createElement(m.vY.DragZoom,{key:"DragZoom.out",out:!0,condition:b.Kg})),(0,dt.L)(v)&&w.push(y.createElement(m.vY.AbortableDraw,Oo({key:"Draw"},(0,dt.o8)(v,e.map),{abortCondition:b.Fm,onDrawEnd:o}))),v===dt.NL.ADD_WAYPOINT&&w.push(y.createElement(m.vY.Draw,{key:"AddWaypoint",type:"Point",condition:b.fs,onDrawEnd:r}));var _,O=new s.default,E=Co((0,Yr.fZ)(e.map));try{for(E.s();!(_=E.n()).done;){var A=_.value;Qr(A.getSource().getFeaturesCollection(),O,qr.JB)}}catch(e){E.e(e)}finally{E.f()}return v===dt.NL.EDIT_FEATURE&&w.push(y.createElement(m.vY.Modify,{key:"EditFeature",features:O,onModifyStart:h,onModifyEnd:g})),w}));Do.propTypes={selectedFeaturesProvider:p().func,selectedTool:p().string.isRequired,onAddFeaturesToSelection:p().func,onAddWaypoint:p().func,onDrawEnded:p().func,onFeaturesTransformed:p().func,onNearestFeatureChanged:p().func,onRemoveFeaturesFromSelection:p().func,onSetSelectedFeatures:p().func,onSingleFeatureSelected:p().func};var Ro={background:"#f8f4f0",height:"100%"},Lo=Ao(Ao(Ao(Ao(Ao(Ao(Ao(Ao(Ao(Ao({},dt.NL.SELECT,"tool-select"),dt.NL.ZOOM,"tool-zoom"),dt.NL.PAN,"tool-pan"),dt.NL.DRAW_POINT,"tool-draw tool-draw-point"),dt.NL.DRAW_CIRCLE,"tool-draw tool-draw-circle"),dt.NL.DRAW_RECTANGLE,"tool-draw tool-draw-rectangle"),dt.NL.DRAW_PATH,"tool-draw tool-draw-path"),dt.NL.DRAW_POLYGON,"tool-draw tool-draw-polygon"),dt.NL.CUT_HOLE,"tool-edit tool-cut-hole"),dt.NL.EDIT_FEATURE,"tool-edit tool-edit-feature"),Io=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ao(n=ho(this,t,[e]),"_getSelectedTransformableFeatures",(function(e){return c((0,S.d4)(e,n.props.selection),qr.lB)})),Ao(n,"_onAddWaypoint",(function(e){var t=e.feature.getGeometry().getCoordinates(),r=mo((0,f.pd)(t,"EPSG:3857","EPSG:4326"),2),o=r[0],i=r[1];n.props.dispatch((0,tn.tv)(Hr.IU.GO_TO,{lon:o,lat:i}))})),Ao(n,"_onBoxDragEnded",(function(e,t){var r,o=t.target.getGeometry(),i=o.getExtent(),a=[],l=n._map.current.map,c=Co((0,Yr.FM)(l));try{for(c.s();!(r=c.n()).done;){r.value.getSource().forEachFeatureIntersectingExtent(i,(function(e){var t=e.getGeometry();"Point"===t.getType()&&o.intersectsCoordinate(t.getCoordinates())&&a.push(e)}))}}catch(e){c.e(e)}finally{c.f()}n._onFeaturesSelected(e,a)})),Ao(n,"_onDrawEnded",(function(e){try{var t=mo((0,qr.o3)(e.feature),1)[0];t.owner="user",r.A.map.features.onCreate(t),n.props.dispatch((0,Xt.Ue)(t))}catch(e){(0,Er.H4)(e)}})),Ao(n,"_onFeatureActivated",(function(e){n.props.dispatch((0,Xt.f7)(e))})),Ao(n,"_onFeaturesModified",(function(e){n._updateFeatures(e.features.getArray(),{type:"modify",event:e})})),Ao(n,"_onFeaturesTransformed",(function(e){e.hasMoved&&n._updateFeatures(e.features,{type:"transform",event:e})})),Ao(n,"_onFeatureSelected",(function(e,t){var r=t?t.getId():void 0;if(void 0!==r||"set"===e||"clear"===e){switch(e){case"activate":n._onFeatureActivated(t);break;case"toggle":e=n.props.selection.includes(r)?"remove":"add";break;case"clear":e="set",t=void 0}n._onFeaturesSelected(e,t?[t]:[])}})),Ao(n,"_onFeaturesSelected",(function(e,t){var r={add:Ar.Dh,remove:Ar.D$,set:Ar.td}[e]||Ar.td,o=t?t.map((function(e){return e.getId()})):[];(r===Ar.td||o&&o.length>0)&&n.props.dispatch(r(o))})),Ao(n,"_onMapMoved",(function(){var e=n._map.current.map,t=e?e.getView():void 0;if(t){var r=(0,S.Al)(t.getCenter()),o=t.getZoom(),i=(0,C.xW)(-t.getRotation());n.props.dispatch((0,Sr.c)({position:r,angle:i,zoom:o}))}})),Ao(n,"_onNearestFeatureChanged",(function(e){n.props.dispatch((0,Pr.yo)(e?e.getId():null))})),Ao(n,"_hideNearestFeatureTooltip",(function(){n.props.dispatch((0,Pr.yo)(null))})),Ao(n,"_disableDefaultContextMenu",(function(){n._map.current.map.getViewport().addEventListener("contextmenu",(function(e){return e.preventDefault(),!1}))})),n._onAddFeaturesToSelection=(0,u.A)(n._onBoxDragEnded,"add"),n._onRemoveFeaturesFromSelection=(0,u.A)(n._onBoxDragEnded,"remove"),n._onSetSelectedFeatures=(0,u.A)(n._onBoxDragEnded,"set"),n._map=y.createRef(),n._mapInnerDiv=y.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_o(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){var e=this.props.glContainer;this.layoutManager=e?e.layoutManager:void 0,Zr.initialize(),this._disableDefaultContextMenu()}},{key:"componentDidUpdate",value:function(){var e=this.props.glContainer;this.layoutManager=e?e.layoutManager:void 0}},{key:"layoutManager",get:function(){return this._layoutManager},set:function(e){this._layoutManager!==e&&(this._layoutManager&&this._layoutManager.off("stateChanged",this.updateSize,this),this._layoutManager=e,this._layoutManager&&this._layoutManager.on("stateChanged",this.updateSize,this))}},{key:"render",value:function(){var e=this.props,t=e.center,n=e.geofencePolygonId,r=e.rotation,o=e.selectedTool,i=e.zoom,a=y.createElement(m.Ss,{center:(0,S.Ur)(t),rotation:-r*Math.PI/180,zoom:i,maxZoom:24,constrainRotation:!1});return y.createElement(Cr.A,null,y.createElement("div",{style:{height:"100%"}},y.createElement(m.T5,{ref:this._map,loadTilesWhileInteracting:!0,id:"main-map-view",view:a,useDefaultControls:!1,className:Lo[o],style:Ro,onMoveEnd:this._onMapMoved},y.createElement(Un,null),y.createElement(Mo,null),y.createElement(ko,{onFeaturesModified:this._onFeaturesModified}),y.createElement(xo,null),y.createElement(Do,{geofencePolygonId:n,selectedTool:o,selectedFeaturesProvider:this._getSelectedTransformableFeatures,onAddFeaturesToSelection:this._onAddFeaturesToSelection,onAddWaypoint:this._onAddWaypoint,onDrawEnded:this._onDrawEnded,onFeaturesModified:this._onFeaturesModified,onFeaturesTransformed:this._onFeaturesTransformed,onNearestFeatureChanged:this._onNearestFeatureChanged,onRemoveFeaturesFromSelection:this._onRemoveFeaturesFromSelection,onSetSelectedFeatures:this._onSetSelectedFeatures,onSingleFeatureSelected:this._onFeatureSelected}),y.createElement(se,{layers:Yr.T9,projection:"EPSG:4326",threshold:40,onOpening:this._hideNearestFeatureTooltip,selectAction:this._onFeatureSelected},y.createElement(jn,null)))))}},{key:"_updateFeatures",value:function(e,t){(0,qr.Iy)(e,this.props.dispatch,t)}},{key:"updateSize",value:function(){var e=this._map.current;e&&e.updateSize()}}],o&&bo(n.prototype,o),i&&bo(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(y.Component);Ao(Io,"propTypes",{dispatch:p().func.isRequired,center:p().arrayOf(p().number),rotation:p().number,selection:p().arrayOf(p().string).isRequired,selectedTool:p().string,zoom:p().number,glContainer:p().object}),Ao(Io,"defaultProps",{center:[19.061951,47.47334],zoom:17});const No=(0,v.Ng)((function(e){return{center:(0,Bn.Gk)(e),rotation:(0,Bn.Ts)(e),zoom:e.map.view.zoom,geofencePolygonId:(0,rn.Md)(e),selectedFeatures:(0,Qt.sU)(e),selectedTool:(0,lt._6)(e),selection:(0,Jr.Lo)(e),uavDetailsPanelFollowsSelection:(0,cn.X6)(e)}}))(Io)},74096:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,':root,\n:host {\n  --ol-background-color: white;\n  --ol-accent-background-color: #F5F5F5;\n  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);\n  --ol-partial-background-color: rgba(255, 255, 255, 0.75);\n  --ol-foreground-color: #333333;\n  --ol-subtle-foreground-color: #666666;\n  --ol-brand-color: #00AAFF;\n}\n\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 1.5px solid var(--ol-background-color);\n  background-color: var(--ol-partial-background-color);\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: var(--ol-partial-background-color);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  border-top: none;\n  color: var(--ol-foreground-color);\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n\n.ol-scale-bar-inner {\n  display: flex;\n}\n\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: var(--ol-foreground-color);\n  float: right;\n  z-index: 10;\n}\n\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 10px;\n  z-index: 11;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-text {\n  position: absolute;\n  font-size: 12px;\n  text-align: center;\n  bottom: 25px;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-index: 9;\n  box-sizing: border-box;\n  border: 1px solid var(--ol-foreground-color);\n}\n\n.ol-scale-singlebar-even {\n  background-color: var(--ol-subtle-foreground-color);\n}\n\n.ol-scale-singlebar-odd {\n  background-color: var(--ol-background-color);\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport,\n.ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.ol-viewport canvas {\n  all: unset;\n  overflow: hidden;\n}\n\n.ol-viewport {\n  touch-action: pan-x pan-y;\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: var(--ol-subtle-background-color);\n  border-radius: 4px;\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: var(--ol-subtle-foreground-color);\n  font-weight: bold;\n  text-decoration: none;\n  font-size: inherit;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: var(--ol-background-color);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  outline: 1px solid var(--ol-subtle-foreground-color);\n  color: var(--ol-foreground-color);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n  display: flex;\n  flex-flow: row-reverse;\n  align-items: center;\n}\n\n.ol-attribution a {\n  color: var(--ol-subtle-foreground-color);\n  text-decoration: none;\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 1px .5em;\n  color: var(--ol-foreground-color);\n  text-shadow: 0 0 2px var(--ol-background-color);\n  font-size: 12px;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution button {\n  flex-shrink: 0;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: var(--ol-partial-background-color);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  height: 150px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: var(--ol-subtle-background-color);\n}\n\n.ol-overviewmap-box {\n  border: 1.5px dotted var(--ol-subtle-foreground-color);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n',""]);const l=a},16575:(e,t,n)=>{var r=n(39297);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},40888:(e,t,n)=>{var r=n(46518),o=n(69565),i=n(20034),a=n(28551),l=n(16575),c=n(77347),u=n(42787);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,s,f=arguments.length<3?t:arguments[2];return a(t)===f?t[n]:(r=c.f(t,n))?l(r)?r.value:void 0===r.get?void 0:o(r.get,f):i(s=u(t))?e(s,n,f):void 0}})},15472:(e,t,n)=>{var r=n(46518),o=n(24475),i=n(10687);r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)}}]);